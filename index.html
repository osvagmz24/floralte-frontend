<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Floralte ‚Äî Ramos, arreglos y eventos</title>
  <meta name="description" content="Floralte Dise√±o Floral: ramos, arreglos, eventos y decoraci√≥n. Env√≠o gratis en Guadalajara, Zapopan y Tlaquepaque." />
  <meta name="theme-color" content="#ffd1e8" />

  <!-- Fonts -->
 <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,600;0,700;1,700&family=Cinzel:wght@500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --pink: #ff2f7d;
      --pink-2: #ff6aa8;
      --pink-soft: #ffe2ee;
      --bg: #fff7fb;
      --card: #ffffff;
      --ink: #2d1b2a;
      --muted: rgba(45,27,42,.72);
      --line: rgba(0,0,0,.10);
      --shadow: 0 12px 28px rgba(0,0,0,.12);
      --radius-xl: 24px;
 --bgSoft: var(--bg);
  --max: 1200px;
  --primary: linear-gradient(135deg, var(--pink) 0%, var(--pink-2) 100%);
  --shadow2: 0 12px 28px rgba(0,0,0,.10);
  --r2: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background: var(--bg);
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}

    /* ========= Splash ========= */
    #splash{
      position:fixed; inset:0; z-index:9999;
      display:grid; place-items:center;
      background: var(--bgSoft);
      transition: opacity .55s ease, transform .55s ease;
      transition: opacity .55s ease, transform .55s ease;
    }
    #splash.hide{opacity:0; transform:scale(1.02); pointer-events:none}
    .splash-card{
      width:min(520px, 92vw);
      border-radius: 30px;
      padding: 22px 18px;
      background: rgba(255,255,255,.82);
      border:1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow);
      text-align:center;
      position:relative;
      overflow:hidden;
    }
    .splash-card:before{
      content:"";
      position:absolute; inset:-60px;
      background: conic-gradient(from 180deg, rgba(255,79,164,.22), rgba(255,143,182,.20), rgba(255,122,194,.20), rgba(255,79,164,.22));
      filter: blur(18px);
      animation: spin 7s linear infinite;
      opacity:.55;
    }
    .splash-inner{position:relative; z-index:2}
    .brand{
      font-family: "Playfair Display", serif;
      font-weight:700;
      letter-spacing:.2px;
      font-size: 38px;
      margin: 2px 0 6px;
    }
    .brand small{
      display:block;
      font-family: Inter, sans-serif;
      font-weight:800;
      letter-spacing:.35em;
      text-transform:uppercase;
      font-size:11px;
      color: rgba(30, 14, 32, .55);
      margin-top:6px;
    }
    .loader{
      margin: 14px auto 0;
      width: 62px; height: 62px;
      border-radius: 999px;
      border: 3px solid rgba(0,0,0,.08);
      border-top-color: rgba(255,79,164,.55);
      border-right-color: rgba(255,143,182,.55);
      animation: spin 1.05s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* ========= Floating petals (always-on animation) ========= */
    #petals{
      position:fixed; inset:0; pointer-events:none; z-index:0;
      overflow:hidden;
    }
    .petal{
      position:absolute;
      top:-20vh;
      width:14px; height:22px;
      border-radius: 20px 20px 20px 20px;
      filter: blur(.2px);
      transform: rotate(16deg);
      animation: fall linear infinite;
      opacity:.9;
    }
    @keyframes fall{
      0%{transform: translateY(-30vh) rotate(0deg); }
      100%{transform: translateY(120vh) rotate(420deg); }
    }

    /* ========= Header / Nav ========= */
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background: rgba(255,255,255,.65);
      border-bottom: 1px solid rgba(0,0,0,.06);
    }
    .navwrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 10px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .logo{
      display:flex; align-items:center; gap:10px;
      font-weight:900;
      letter-spacing:.2px;
    }
    .logo-badge{
      width:40px; height:40px; border-radius:14px;
      display:grid; place-items:center;
      background: rgba(255,79,164,.14);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 12px 22px rgba(0,0,0,.06);
      font-size:18px;
    }
    .logo strong{font-family:"Playfair Display", serif; font-size:18px}
    .logo span{font-size:12px; color:rgba(30,14,32,.6); font-weight:800; letter-spacing:.22em; text-transform:uppercase}

    nav{
      display:flex; align-items:center; gap:8px;
    }
    .navlink{
      padding:10px 12px;
      border-radius:999px;
      font-weight:800;
      font-size:13px;
      color: rgba(30,14,32,.72);
      transition: transform .12s ease, background .12s ease;
      white-space:nowrap;
    }
    .navlink:hover{background: rgba(255, 79, 164, .10); transform: translateY(-1px);}
    .nav-actions{display:flex; align-items:center; gap:10px}

    .menu-toggle{
      display:none;
      width:42px; height:42px;
      border-radius:14px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.85);
      cursor:pointer;
      box-shadow: 0 10px 20px rgba(0,0,0,.06);
    }

    .btn{
      border:none;
      cursor:pointer;
      border-radius:999px;
      font-weight:900;
      padding:11px 14px;
      font-size:13px;
      transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn:active{transform:translateY(1px)}
    .btn-primary{
      background: var(--primary);
      box-shadow: 0 16px 34px rgba(255, 79, 164, .20);
    }
    .btn-primary:hover{filter:saturate(1.05)}
    .btn-ghost{
      background: rgba(255,255,255,.86);
      border: 1px solid rgba(0,0,0,.10);
      box-shadow: 0 14px 26px rgba(0,0,0,.06);
      color: rgba(30,14,32,.82);
    }
    .btn-ghost:hover{transform:translateY(-1px)}

    .cartbtn{
      position:relative;
      border-radius:14px;
      width:44px; height:44px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.85);
      cursor:pointer;
      box-shadow: 0 10px 20px rgba(0,0,0,.06);
      display:grid; place-items:center;
      font-weight:900;
    }
    .badge{
      position:absolute; top:-7px; right:-7px;
      width:20px; height:20px;
      border-radius:999px;
      background: rgba(255,79,164,.14);
      color:white;
      display:grid; place-items:center;
      font-size:11px;
      border:2px solid rgba(255,255,255,.9);
      box-shadow: 0 10px 18px rgba(0,0,0,.10);
    }

    @media(max-width: 980px){
      .menu-toggle{display:grid; place-items:center}
      nav{
        position:fixed; left:14px; right:14px; top:70px;
        background: rgba(255,255,255,.86);
        border:1px solid rgba(0,0,0,.10);
        border-radius: 20px;
        padding: 10px;
        box-shadow: var(--shadow);
        display:none;
        flex-direction:column;
        align-items:stretch;
        gap:6px;
        z-index:60;
      }
      nav.open{display:flex}
      .navlink{border-radius:14px}
      .nav-actions{gap:8px}
    }

    /* ========= Sections / Layout ========= */
    main{position:relative; z-index:1}
    .section{padding: 70px 14px}
    .inner{max-width: var(--max); margin: 0 auto}
    .section-head{display:flex; flex-direction:column; gap:10px; margin-bottom:18px}
    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      padding: 8px 12px;
      border-radius:999px;
      font-weight:900;
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      background: rgba(255, 79, 164, .08);
      border:1px solid rgba(255,79,164,.12);
      color: rgba(30, 14, 32, .78);
      width:fit-content;
    }
    h1,h2,h3{font-family:"Playfair Display", serif; margin:0}
    h2{font-size:34px; line-height:1.15}
    p{margin:0; color: rgba(30,14,32,.72)}
    .divider{
      height:1px; width:100%;
      background: rgba(0,0,0,.10);
      margin-top:12px;
    }

    /* ========= Hero ========= */
    /* HERO */
.hero {
  position: relative;
  min-height: 100vh;

}

  /* üî• IMAGEN N√çTIDA */
  background-image: url("images/hero.jpg"); /* CAMBIA LA RUTA */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  display: flex;
  align-items: center;
  justify-content: center;
}

/* OVERLAY ROSA SUAVE (SIN BLUR) */
.hero-overlay {
  position: absolute;
  inset: 0;
  background: rgba(255, 182, 193, 0.18); /* rosa pastel ligero */
  z-index: 1;
}

/* CONTENIDO */
.hero-content {
  position: relative;
  z-index: 2;
  text-align: center;
  padding: 2rem;
  max-width: 720px;
  color: #ffffff;
}

/* TITULO */
.hero-content h1 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(3rem, 6vw, 5rem);
  font-weight: 700;
  margin-bottom: 1rem;

  /* üî• Elegancia */
  text-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
}

/* TEXTO */
.hero-content p {
  font-family: 'Inter', sans-serif;
  font-size: 1.1rem;
  line-height: 1.6;
  margin-bottom: 2rem;
  text-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
}

/* BOT√ìN */
.hero-btn {
  display: inline-block;
  padding: 0.85rem 2.2rem;
  border-radius: 999px;
  background: #ffffff;
  color: #e11d48; /* rosa elegante */
  font-weight: 600;
  text-decoration: none;
  transition: all 0.3s ease;
}

.hero-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 25px rgba(0, 0, 0, 0.25);
}


    /* ========= Product Grid ========= */
    .controls{
      display:flex; flex-direction:column; gap:10px;
      margin-bottom: 14px;
    }
    .chips{display:flex; flex-wrap:wrap; gap:8px}
    .chip{
      border:1px solid rgba(0,0,0,.12);
      background: rgba(255,255,255,.92);
      padding: 10px 12px;
      border-radius: 999px;
      cursor:pointer;
      font-size: 13px;
      font-weight: 900;
      color: rgba(30,14,32,.74);
      transition: transform .12s ease, box-shadow .18s ease, border-color .18s ease;
    }
    .chip:hover{transform:translateY(-1px); box-shadow: 0 14px 22px rgba(0,0,0,.06)}
    .chip.active{border-color: rgba(255,79,164,.45); box-shadow: 0 16px 26px rgba(255,79,164,.12)}
    .row{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }
    .search{
      flex: 1;
      min-width: 220px;
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.12);
      padding: 11px 12px;
      outline:none;
      font-size: 13px;
      background: rgba(255,255,255,.92);
    }
    .select{
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.12);
      padding: 11px 12px;
      outline:none;
      font-size: 13px;
      background: rgba(255,255,255,.92);
      font-weight:800;
      color: rgba(30,14,32,.72);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(1, minmax(0,1fr));
      gap: 14px;
    }
    @media(min-width: 720px){ .grid{grid-template-columns: repeat(2, minmax(0,1fr));} }
    @media(min-width: 1050px){ .grid{grid-template-columns: repeat(3, minmax(0,1fr));} }

    .product{
      background: rgba(255,255,255,.92);
      border:1px solid rgba(0,0,0,.06);
      border-radius: 20px;
      overflow:hidden;
      box-shadow: var(--shadow2);
      display:flex;
      flex-direction:column;
      min-height: 100%;
      cursor:pointer;
      transition: transform .16s ease, box-shadow .18s ease, filter .18s ease;
    }
    .product:hover{
      transform: translateY(-2px);
      box-shadow: 0 18px 34px rgba(0,0,0,.10);
      filter: saturate(1.02);
    }
    .product-media{
      height: 178px;
      background: rgba(255,79,164,.14);
      position:relative;
      overflow:hidden;
    }
    .product-media img{
      width:100%; height:100%;
      object-fit: cover;
      transform: scale(1.02);
      transition: transform .26s ease;
      filter: saturate(1.02);
    }
    .product:hover .product-media img{transform:scale(1.07)}
    .tag{
      position:absolute; top:12px; left:12px;
      background: rgba(255,255,255,.90);
      border:1px solid rgba(0,0,0,.08);
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 11px;
      font-weight: 900;
      letter-spacing:.12em;
      text-transform:uppercase;
      color: rgba(30,14,32,.72);
      box-shadow: 0 12px 20px rgba(0,0,0,.06);
    }
    .product-body{
      padding: 12px 12px 14px;
      display:flex; flex-direction:column; gap:10px;
      flex: 1;
    }
    .product-name{
      font-weight: 900;
      color: rgba(60, 20, 50, .92);
      line-height: 1.2;
      font-size: 15px;
    }
    .product-meta{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      font-size: 13px;
      color: rgba(30,14,32,.66);
      font-weight: 800;
    }
    .price{font-weight: 900; color: rgba(30,14,32,.92)}
    .product-actions{
      display:flex;
      gap:10px;
      align-items:center;
      margin-top:auto;
    }
    .qty{
      width: 92px;
      border-radius: 999px;
      border:1px solid rgba(0,0,0,.14);
      padding: 9px 10px;
      background: rgba(255,255,255,.95);
      font-weight: 900;
      outline:none;
    }

    /* ========= Drawer (Cart) ========= */
    .drawer-backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.35);
      z-index: 3000;
      opacity:0; pointer-events:none;
      transition: opacity .2s ease;
    }
    .drawer-backdrop.show{opacity:1; pointer-events:auto}
    .drawer{
      position:fixed; top:0; right:0;
      width: min(460px, 92vw);
      height:100%;
      background: rgba(255,255,255,.96);
      border-left: 1px solid rgba(0,0,0,.10);
      z-index: 3100;
      transform: translateX(110%);
      transition: transform .25s ease;
      display:flex; flex-direction:column;
      backdrop-filter: blur(12px);
    }
    .drawer.show{transform: translateX(0)}
    .drawer-head{
      padding: 14px 14px;
      border-bottom: 1px solid rgba(0,0,0,.08);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .xbtn{
      border:none;
      background: rgba(0,0,0,.06);
      width: 40px; height: 40px;
      border-radius: 999px;
      cursor:pointer;
      font-size: 18px;
      transition: transform .12s ease, background .12s ease;
    }
    .xbtn:hover{transform:translateY(-1px); background: rgba(0,0,0,.08)}
    .drawer-body{
      padding: 14px;
      overflow:auto;
      display:flex; flex-direction:column;
      gap: 12px;
    }
    .cart-empty{
      background: rgba(255, 228, 241, .35);
      border: 1px solid rgba(255,79,164,.18);
      border-radius: 18px;
      padding: 14px;
      color: rgba(30,14,32,.74);
      font-weight:800;
    }
    .cart-items{display:flex; flex-direction:column; gap:10px}
    .cart-item{
      display:flex; justify-content:space-between; gap:10px;
      border: 1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.92);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 12px 20px rgba(0,0,0,.06);
    }
    .cart-item small{color: rgba(30,14,32,.62); font-weight:800}
    .cart-item-actions{display:flex; flex-direction:column; gap:8px; align-items:flex-end}
    .mini{
      width: 70px;
      border-radius: 999px;
      border:1px solid rgba(0,0,0,.14);
      padding: 8px 10px;
      background: rgba(255,255,255,.95);
      font-weight: 900;
      outline:none;
    }
    .link-danger{
      border:none;
      background:transparent;
      cursor:pointer;
      color: rgba(255,79,164,.90);
      font-weight: 900;
    }
    .totals{
      display:flex; justify-content:space-between; align-items:center;
      font-weight: 900;
      color: rgba(30,14,32,.92);
      border-top: 1px solid rgba(0,0,0,.08);
      padding-top: 12px;
      margin-top: 6px;
    }
    .stack{display:flex; flex-direction:column; gap:8px}
    .label{font-size:12px; font-weight:900; color: rgba(30,14,32,.70)}
    .hint{font-size:12px; color: rgba(30,14,32,.62); font-weight:700}
    .field{
      width:100%;
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.12);
      padding: 11px 12px;
      background: rgba(255,255,255,.92);
      outline:none;
      font-size: 13px;
      font-weight: 800;
    }
    .drawer-actions{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .btn-wide{width:100%}

    /* ========= Modal (Product detail) ========= */
    .modal-backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.45);
      z-index: 3200;
      opacity:0; pointer-events:none;
      transition: opacity .2s ease;
      display:grid; place-items:center;
      padding: 14px;
    }
    .modal-backdrop.show{opacity:1; pointer-events:auto}
    .modal{
      width: min(980px, 96vw);
      border-radius: 26px;
      background: rgba(255,255,255,.98);
      border:1px solid rgba(0,0,0,.10);
      box-shadow: var(--shadow);
      overflow:hidden;
      transform: translateY(10px) scale(.99);
      opacity:0;
      transition: transform .2s ease, opacity .2s ease;
    }
    .modal-backdrop.show .modal{transform: translateY(0) scale(1); opacity:1}
    .modal-grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:0;
    }
    @media(max-width: 920px){
      .modal-grid{grid-template-columns:1fr}
    }
    .modal-media{
      background: rgba(255,79,164,.14);
      min-height: 320px;
      position:relative;
    }
    .modal-media img{width:100%; height:100%; object-fit:cover}
    .modal-body{padding: 16px 16px 18px}
    .modal-body h3{font-size: 30px; margin-bottom: 8px}
    .modal-body .meta{display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; margin: 10px 0 8px}
    .rel-grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 10px;
      margin-top: 12px;
    }
    @media(max-width: 520px){ .rel-grid{grid-template-columns:1fr} }
    .rel{
      border:1px solid rgba(0,0,0,.08);
      border-radius: 18px;
      overflow:hidden;
      background: rgba(255,255,255,.92);
      cursor:pointer;
      box-shadow: 0 12px 20px rgba(0,0,0,.06);
      transition: transform .15s ease;
    }
    .rel:hover{transform: translateY(-2px)}
    .rel img{height: 92px; width:100%; object-fit:cover}
    .rel .relb{padding: 10px; display:flex; flex-direction:column; gap:6px}
    .rel strong{font-size:13px}
    .rel small{color: rgba(30,14,32,.62); font-weight:800}

    /* ========= Arma tu ramo ========= */
    #arma-tu-ramo{background: var(--bg)}
    .builder-grid{display:flex; flex-direction:column; gap:18px}
    @media(min-width: 980px){ .builder-grid{flex-direction:row} }
    .panel{
      border-radius: var(--r2);
      background: rgba(255,255,255,.80);
      border:1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow2);
      padding: 16px 16px 18px;
    }
    .builder-flowers{margin-top:10px; display:grid; grid-template-columns: minmax(0,1fr); gap:12px}
    @media(min-width: 720px){ .builder-flowers{grid-template-columns: repeat(2, minmax(0,1fr));} }
    @media(min-width: 1150px){ .builder-flowers{grid-template-columns: repeat(3, minmax(0,1fr));} }

    .flor-card{
      background: rgba(255,255,255,.92);
      border-radius: 20px;
      padding: 10px 12px 12px;
      box-shadow: 0 12px 20px rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.06);
      display:flex; flex-direction:column; gap:6px;
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .flor-card:hover{transform: translateY(-2px); box-shadow: 0 18px 26px rgba(0,0,0,.10)}
    .flor-header{display:flex; gap:10px; align-items:center}
    .flor-image{
      width:64px; height:64px;
      border-radius: 16px;
      overflow:hidden;
      background: rgba(255,79,164,.14);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 18px rgba(0,0,0,.06);
      flex: 0 0 auto;
    }
    .flor-image img{width:100%; height:100%; object-fit:cover}
    .flor-name{font-weight: 900; color: rgba(60, 20, 50, .92)}
    .flor-precio{font-size: 12px; color: rgba(30,14,32,.64); font-weight: 800}
    .flor-controls{display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-top:4px}
    .flor-controls label{font-size: 11px; font-weight: 900; color: rgba(30,14,32,.62)}
    .flor-select, .flor-qty{
      border-radius: 999px;
      border:1px solid rgba(0,0,0,.14);
      padding: 6px 10px;
      font-size: 13px;
      background: rgba(255,255,255,.95);
      font-weight: 900;
      outline:none;
    }
    .flor-qty{width: 92px}
    .addbtn{
      margin-left:auto;
      border:none; cursor:pointer;
      border-radius: 999px;
      padding: 9px 12px;
      font-weight: 900;
      background: rgba(255,79,164,.12);
      border: 1px solid rgba(255,79,164,.18);
      color: rgba(60,20,50,.92);
      transition: transform .12s ease, background .12s ease;
    }
    .addbtn:hover{transform: translateY(-1px); background: rgba(255,79,164,.16)}

    .summary{
      min-width: min(420px, 100%);
    }
    .summary h3{font-size: 24px}
    .summary-list{display:flex; flex-direction:column; gap:10px; margin-top:10px}
    .sumrow{
      display:flex; justify-content:space-between; gap:10px;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.92);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 10px 18px rgba(0,0,0,.06);
      font-weight: 800;
      color: rgba(30,14,32,.80);
    }
    .summary-actions{display:flex; flex-wrap:wrap; gap:10px; margin-top:12px}
    .btn-secondary{
      background: rgba(255,255,255,.90);
      border: 1px solid rgba(0,0,0,.12);
      box-shadow: 0 14px 22px rgba(0,0,0,.06);
      color: rgba(30,14,32,.82);
    }

    /* ========= Eventos ========= */
    #eventos{background: var(--bg)}
    .event-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    @media(min-width: 980px){ .event-grid{grid-template-columns: 1.15fr .85fr;} }
    .card{
      border-radius: var(--r2);
      background: rgba(255,255,255,.80);
      border:1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow2);
      padding: 16px 16px 18px;
    }
    .card h3{font-size: 24px; margin-bottom: 10px}
    .grid2{display:grid; grid-template-columns: 1fr; gap:10px}
    @media(min-width: 560px){ .grid2{grid-template-columns: 1fr 1fr} }
    .checklist{display:flex; flex-direction:column; gap:10px; margin-top: 6px}
    .chk{
      display:flex; gap:10px; align-items:flex-start;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.92);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 10px 18px rgba(0,0,0,.06);
    }
    .chk input{margin-top: 3px}
    .chk strong{font-weight: 900}
    .chk small{display:block; color: rgba(30,14,32,.62); font-weight: 800; margin-top: 2px}

    /* ========= Reviews ========= */
    .reviews{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    @media(min-width: 980px){ .reviews{grid-template-columns: 1.05fr .95fr;} }
    .review-card{
      border-radius: var(--r2);
      background: rgba(255,255,255,.80);
      border:1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow2);
      padding: 16px 16px 18px;
      overflow:hidden;
      position:relative;
    }
    .review-card:before{
      content:"";
      position:absolute; inset:-120px;
      background: rgba(255,79,164,.10);
      filter: blur(16px);
      opacity:.7;
    }
    .review-card > *{position:relative; z-index:2}
    .review-list{display:flex; flex-direction:column; gap:10px; margin-top:10px}
    .review{
      border:1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.92);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 10px 18px rgba(0,0,0,.06);
    }
    .review strong{display:block; font-weight: 900}
    .stars{letter-spacing:.12em; font-weight:900; color: rgba(255,79,164,.80); margin-top:2px}
    .review p{margin-top:6px; font-size: 13px}

    /* ========= Footer ========= */
    footer{
      padding: 26px 14px 40px;
      border-top: 1px solid rgba(0,0,0,.06);
      background: rgba(255,255,255,.70);
      backdrop-filter: blur(12px);
    }
    .foot{max-width: var(--max); margin:0 auto; display:flex; flex-direction:column; gap:10px}
    .foot small{color: rgba(30,14,32,.62); font-weight: 800}

    /* ========= Reveal-on-scroll ========= */
    .reveal{opacity:0; transform: translateY(10px); transition: opacity .55s ease, transform .55s ease}
    .reveal.on{opacity:1; transform: translateY(0)}
  
    /* ===== HERO (original vibe) ===== */

    .heroLux{
  position: relative;
  min-height: 92vh;
  display: grid;
  place-items: center;
  overflow: hidden;

  /* variables SOLO del hero */
  --brand:#ff4fa3;
  --brand2:#ff78c6;
  --heroShadow: rgba(0,0,0,.42);

  /* ‚úÖ IMAGEN N√çTIDA: SIN BLUR */
  background-image: url("images/por1.jpg"); /* <-- tu hero */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}


    /* Esto ayuda a que se vea "crisp" en pantallas grandes */
    image-rendering: auto;
  }

  /* Overlay m√≠nimo para legibilidad (NO blur) */
  .heroLux__overlay{
    position:absolute;
    inset:0;
    z-index:1;

    /* Rosa intenso pero MUY sutil para no ‚Äúlavar‚Äù la foto */
    background:
      radial-gradient(900px 420px at 50% 55%, rgba(255,79,163,.16), transparent 60%),
      linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.22));
  }

  .heroLux__inner{
    position:relative;
    z-index:2;
    width:min(1100px, 92vw);
    padding: clamp(18px, 4vw, 56px);
  }

  .heroLux__copy{
    max-width: 860px;
    text-align: center;
    margin: 0 auto;
  }

  .heroLux__kicker{
    display:inline-flex;
    gap:.5rem;
    align-items:center;
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    font-weight: 600;
    letter-spacing: .22em;
    text-transform: uppercase;
    font-size: .78rem;
    color: rgba(255,255,255,.92);
    padding: .6rem 1rem;
    border-radius: 999px;

    /* Glass elegante SIN blur */
    background: rgba(255,255,255,.10);
    border: 1px solid rgba(255,255,255,.18);
    box-shadow: 0 16px 40px rgba(0,0,0,.16);
    margin-bottom: 1.25rem;
  }

  .heroLux__title{
    margin: 0 0 1.1rem 0;
    line-height: 1.02;
  }

  .heroLux__titleTop{
    display:block;
    font-family: Cinzel, serif;
    font-weight: 600;
    letter-spacing: .10em;
    text-transform: uppercase;
    font-size: clamp(1.05rem, 2.4vw, 1.65rem);
    color: rgba(255,255,255,.92);
  }

  /* Extravagante + elegante */
  .heroLux__titleMain{
    display:block;
    font-family: "Playfair Display", serif;
    font-style: italic;
    font-weight: 700;
    font-size: clamp(3.6rem, 8vw, 6.6rem);
    letter-spacing: -0.02em;

    /* Gradiente rosa premium en letras */
    background: linear-gradient(90deg, #fff 0%, var(--brand2) 35%, var(--brand) 70%, #fff 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;

    text-shadow: 0 20px 60px var(--heroShadow);
  }

  .heroLux__sub{
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    font-size: clamp(1.05rem, 2.2vw, 1.25rem);
    line-height: 1.7;
    margin: 0 auto 2rem auto;
    color: rgba(255,255,255,.92);
    max-width: 760px;
    text-shadow: 0 14px 35px rgba(0,0,0,.35);
  }

  .heroLux__actions{
    display:flex;
    gap: .9rem;
    justify-content:center;
    flex-wrap: wrap;
  }

  .heroLux__btn{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding: 1rem 1.6rem;
    border-radius: 999px;
    text-decoration:none;
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    font-weight: 650;
    letter-spacing: .02em;
    transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
    will-change: transform;
  }

  .heroLux__btn--primary{
    color: #ffffff;
    background: linear-gradient(135deg, var(--brand) 0%, var(--brand2) 100%);
    box-shadow: 0 18px 45px rgba(255,79,163,.22), 0 18px 45px rgba(0,0,0,.22);
  }

  .heroLux__btn--ghost{
    color: rgba(255,255,255,.95);
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.22);
    box-shadow: 0 18px 45px rgba(0,0,0,.18);
  }

  .heroLux__btn:hover{
    transform: translateY(-2px);
    box-shadow: 0 22px 55px rgba(0,0,0,.28);
  }

  /* M√≥vil: que no se vaya enorme */
  @media (max-width: 520px){
    .heroLux{ min-height: 88vh; }
    .heroLux__kicker{ font-size:.72rem; letter-spacing:.18em; }
    .heroLux__btn{ width: 100%; padding: 1rem 1.2rem; }
  }

  </style>

  <!-- Minimal splash fallback: hide even if later JS fails -->
  <script>
    window.setTimeout</script>
</head>

<body>
  <div id="splash" aria-hidden="true">
    <div class="splash-card">
      <div class="splash-inner">
        <div class="brand">Floralte <span aria-hidden="true">üå∏</span><small>DISE√ëO FLORAL</small></div>
        <div style="color:rgba(30,14,32,.70); font-weight:800; font-size:13px">
          Cargando experiencia‚Ä¶
        </div>
        <div class="loader" aria-hidden="true"></div>
      </div>
    </div>
  </div>

  <div id="petals" aria-hidden="true"></div>

  <header>
    <div class="navwrap">
      <a class="logo" href="#hero" aria-label="Ir al inicio">
        <div class="logo-badge" aria-hidden="true">üå∏</div>
        <div style="display:flex;flex-direction:column;line-height:1.05">
          <strong>Floralte</strong>
          <span>Dise√±o Floral</span>
        </div>
      </a>

      <nav aria-label="Navegaci√≥n principal">
        <a class="navlink" href="#productos">Productos</a>
        <a class="navlink" href="#arma-tu-ramo">Arma tu ramo</a>
        <a class="navlink" href="#eventos">Eventos</a>
        <a class="navlink" href="#resenas">Rese√±as</a>
        <a class="navlink" href="#contacto">Contacto</a>
      </nav>

      <div class="nav-actions">
        <button class="btn btn-ghost" id="btn-whats-quick" type="button">WhatsApp</button>
        <button class="cartbtn" id="btnOpenCart" type="button" aria-label="Abrir carrito">
          <span aria-hidden="true" class="cart-dot"></span>
          <span class="badge" id="cartCount">0</span>
        </button>
        <button class="menu-toggle" type="button" aria-label="Abrir men√∫" id="menuToggle">‚ò∞</button>
      </div>
    </div>
  </header>

  <main>
    
<section class="heroLux" aria-label="Hero Floralte">
  <div class="heroLux__overlay"></div>

  <div class="heroLux__inner">
    <div class="heroLux__copy">
      <span class="heroLux__kicker">Floralte Dise√±o Floral</span>

      <h1 class="heroLux__title">
        <span class="heroLux__titleTop">Regala momentos √∫nicos</span>
        <span class="heroLux__titleMain">Regala Momentos Floralte</span>
      </h1>

      <p class="heroLux__sub">
        Creatividad en cada dise√±o, amor en cada p√©talo.
      </p>

      <div class="heroLux__actions">
        <a class="heroLux__btn heroLux__btn--primary" href="#productos">Ver arreglos</a>
        <a class="heroLux__btn heroLux__btn--ghost" href="#eventos">Cotizar evento</a>
      </div>
    </div>
  </div>
</section>


    <section id="productos" class="section">
      <div class="inner">
        <div class="section-head reveal">
          <div class="kicker">Cat√°logo</div>
          <h2>Productos por categor√≠a</h2>
          <p>Selecciona, agrega al carrito y env√≠anos el pedido por WhatsApp o contin√∫a a Mercado Pago.</p>
          <div class="divider"></div>
        </div>

        <div class="controls reveal">
          <div class="chips" id="categoryChips"></div>
          <div class="row">
            <input class="search" id="searchInput" placeholder="Buscar: 'ramo', 'rosas', 'evento'‚Ä¶" />
            <select class="select" id="sortSelect" aria-label="Ordenar productos">
              <option value="featured">Recomendados</option>
              <option value="price_asc">Precio: menor a mayor</option>
              <option value="price_desc">Precio: mayor a menor</option>
              <option value="name_asc">Nombre: A‚ÄìZ</option>
            </select>
          </div>
        </div>

        <div class="grid reveal" id="productsGrid" aria-live="polite"></div>
      </div>
    </section>

    <section id="arma-tu-ramo" class="section">
      <div class="inner">
        <div class="section-head reveal">
          <div class="kicker">Personaliza</div>
          <h2>Arma tu ramo</h2>
          <p>Selecciona flores, color y cantidad. Te mandamos el resumen y total aproximado por WhatsApp.</p>
          <div class="divider"></div>
        </div>

        <div class="builder-grid reveal">
          <div class="panel" style="flex:1">
            <h3 style="font-size:24px">Flores</h3>
            <p style="font-weight:800; color:rgba(30,14,32,.62); margin-top:6px">
              Si una imagen no carga, es porque falta el archivo en /images. A√∫n as√≠, la flor se puede seleccionar.
            </p>
            <div class="builder-flowers" id="builder-flowers"></div>
          </div>

          <div class="panel summary" style="flex:0 0 420px">
            <h3>Tu selecci√≥n</h3>
            <div class="summary-list" id="summary-list"></div>
            <div class="totals" style="margin-top:10px">
              <span>Total aprox</span>
              <span id="summary-total">$0</span>
            </div>

            <div class="summary-actions">
              <button class="btn btn-secondary" type="button" id="btn-clear-ramo">Limpiar</button>
              <button class="btn btn-primary" type="button" id="btn-whatsapp-ramo">Enviar a WhatsApp</button>
            </div>

            <div class="hint" style="margin-top:10px">
              Los precios son aproximados y pueden variar seg√∫n temporada. Confirmamos disponibilidad y cotizaci√≥n final.
            </div>

            <div class="divider"></div>

            <div style="display:flex;flex-direction:column;gap:10px">
              <div class="label">Preview IA (opcional)</div>
              <button class="btn btn-ghost" type="button" id="btn-preview">Generar preview IA</button>
              <div id="previewBox" style="display:none;border-radius:18px;overflow:hidden;border:1px solid rgba(0,0,0,.08);background:#fff;box-shadow:0 12px 20px rgba(0,0,0,.06)">
                <img id="previewImg" alt="Preview de ramo" />
              </div>
              <div class="hint">Requiere tu backend (endpoint /api/ramo-preview). Si no existe, no pasa nada.</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="eventos" class="section">
      <div class="inner">
        <div class="section-head reveal">
          <div class="kicker">Eventos</div>
          <h2>Arma tu cotizaci√≥n de evento</h2>
          <p>Tipo de evento, cantidad de mesas o personas y lo que quieres incluir. Te lo mandamos a WhatsApp para cotizar.</p>
          <div class="divider"></div>
        </div>

        <div class="event-grid reveal">
          <div class="card">
            <h3>Datos del evento</h3>

            <div class="grid2">
              <div class="stack">
                <div class="label">Tipo de evento</div>
                <select class="field" id="eTipo">
                  <option value="Boda">Boda</option>
                  <option value="XV a√±os">XV a√±os</option>
                  <option value="Cumplea√±os">Cumplea√±os</option>
                  <option value="Empresarial">Empresarial</option>
                  <option value="Otro">Otro</option>
                </select>
              </div>

              <div class="stack">
                <div class="label">Fecha (opcional)</div>
                <input class="field" id="eFecha" type="date" />
              </div>

              <div class="stack">
                <div class="label">Cantidad de mesas</div>
                <input class="field" id="eMesas" type="number" min="0" value="10" />
              </div>

              <div class="stack">
                <div class="label">Personas (aprox)</div>
                <input class="field" id="ePersonas" type="number" min="0" value="100" />
              </div>

              <div class="stack" style="grid-column:1/-1">
                <div class="label">Ubicaci√≥n / sal√≥n</div>
                <input class="field" id="eLugar" placeholder="Ej: Tlaquepaque, sal√≥n X, etc." />
                <div class="hint">El transporte se cobra (si aplica). Ind√≠canos ubicaci√≥n exacta para confirmarlo.</div>
              </div>
            </div>

            <div class="divider"></div>

            <h3 style="margin-top:6px">Servicios a incluir</h3>
            <div class="checklist" id="servicesList"></div>

            <div class="divider"></div>

            <div class="stack">
              <div class="label">Notas</div>
              <textarea class="field" id="eNotas" rows="3" placeholder="Colores, estilo, referencias, horario de montaje‚Ä¶"></textarea>
              <div class="drawer-actions">
                <button class="btn btn-primary btn-wide" id="btnSendEventWA" type="button">Enviar a WhatsApp para cotizar</button>
              </div>
            </div>
          </div>

          <div class="card">
            <h3>Jardiner√≠a</h3>
            <p style="font-weight:800;color:rgba(30,14,32,.62)">
              Tambi√©n hacemos decoraci√≥n de jardiner√≠a (eventos y hogares): dise√±o, plantas, macetas, mantenimiento y detalle floral.
            </p>

            <div class="divider"></div>

            <div class="stack">
              <div class="label">¬øQu√© necesitas?</div>
              <select class="field" id="jTipo">
                <option value="Decoraci√≥n de jardiner√≠a">Decoraci√≥n de jardiner√≠a</option>
                <option value="Mantenimiento / poda">Mantenimiento / poda</option>
                <option value="Plantas + macetas">Plantas + macetas</option>
                <option value="Jard√≠n para evento">Jard√≠n para evento</option>
              </select>
            </div>

            <div class="stack">
              <div class="label">Ubicaci√≥n</div>
              <input class="field" id="jLugar" placeholder="Ej: Zapopan, Col. X, etc." />
            </div>

            <div class="stack">
              <div class="label">Detalles</div>
              <textarea class="field" id="jNotas" rows="4" placeholder="Medidas, estilo, presupuesto, fotos de referencia‚Ä¶"></textarea>
            </div>

            <button class="btn btn-ghost btn-wide" id="btnSendGardenWA" type="button">Cotizar jardiner√≠a por WhatsApp</button>
          </div>
        </div>
      </div>
    </section>

    <section id="resenas" class="section">
      <div class="inner">
        <div class="section-head reveal">
          <div class="kicker">Rese√±as</div>
          <h2>Lo que dicen nuestros clientes</h2>
         
          <div class="divider"></div>
        </div>

        <div class="reviews reveal">
          <div class="review-card">
            <h3 style="font-size:24px">Rese√±as destacadas</h3>
            <div class="review-list" id="demoReviews"></div>
          </div>

          <div class="review-card">
            <h3 style="font-size:24px">Google Maps</h3>
            <p style="font-weight:800;color:rgba(30,14,32,.62)">
             <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3733.7771894728116!2d-103.31943022570525!3d20.63793680108909!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8428b38eaf99c163%3A0xfeb328af41e401dc!2sFlorer%C3%ADa%20Floralte!5e0!3m2!1sen!2smx!4v1766874176529!5m2!1sen!2smx" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe><br>
             
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="contacto" class="section">
      <div class="inner">
        <div class="section-head reveal">
          <div class="kicker">Contacto</div>
          <h2>¬øListo para pedir?</h2>
          <p>Te atendemos por WhatsApp. Tambi√©n puedes agregar productos al carrito y enviarnos el pedido directo.</p>
          <div class="divider"></div>
        </div>

        <div class="card reveal">
          <div class="grid2">
            <div class="stack">
              <div class="label">Direcci√≥n</div>
              <div style="font-weight:900">Avenida Ni√±os H√©roes 74, Rancho Blanco, Tlaquepaque</div>
              <div class="hint">Horario y disponibilidad se confirman por WhatsApp.</div>
            </div>

            <div class="stack">
              <div class="label">Env√≠o</div>
              <div style="font-weight:900">Gratis: Guadalajara ¬∑ Zapopan ¬∑ Tlaquepaque</div>
              <div class="hint">Fuera de esas zonas: se cotiza transporte.</div>
            </div>

            <div class="stack">
              <div class="label">Pagos</div>
              <div style="font-weight:900">Transferencia / Mercado Pago</div>
              <div class="hint">Hasta 12 meses con Mercado Pago.</div>
            </div>

            <div class="stack">
              <div class="label">Acci√≥n</div>
              <button class="btn btn-primary btn-wide" id="btnContactWA" type="button">Escribir por WhatsApp</button>
              <button class="btn btn-ghost btn-wide" id="btnOpenCart3" type="button">Abrir carrito</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="foot">
        <div style="display:flex;align-items:center;gap:10px">
          <div class="logo-badge" aria-hidden="true">üå∏</div>
          <div style="display:flex;flex-direction:column;line-height:1.05">
            <strong style="font-family:'Playfair Display',serif;font-size:18px">Floralte</strong>
            <small>¬© <span id="year"></span> ‚Äî Dise√±o Floral</small>
          </div>
        </div>
        <small>Este sitio es una demo de cat√°logo + cotizaci√≥n por WhatsApp. Para cobro con Mercado Pago, pega tu link/endpoint en el c√≥digo.</small>
      </div>
    </footer>
  </main>

  <div class="drawer-backdrop" id="cartBackdrop" aria-hidden="true"></div>
  <aside class="drawer" id="cartDrawer" aria-label="Carrito">
    <div class="drawer-head">
      <h3 style="margin:0">Carrito</h3>
      <button class="xbtn" id="btnCloseCart" type="button" aria-label="Cerrar carrito">‚úï</button>
    </div>

    <div class="drawer-body">
      <div class="cart-empty" id="cartEmpty">
        A√∫n no agregas productos. Elige algo del cat√°logo y se agrega aqu√≠.
      </div>

      <div class="cart-items" id="cartItems" style="display:none"></div>

      <div class="totals">
        <span>Total aprox</span>
        <span id="cartTotal">$0</span>
      </div>

      <div class="divider"></div>

      <div class="stack">
        <div class="label">Entrega</div>
        <select class="field" id="oEntrega">
          <option value="Entrega a domicilio">Entrega a domicilio</option>
          <option value="Recoger en tienda">Recoger en tienda</option>
        </select>
        <div class="hint" id="shipHint">Selecciona ciudad para calcular env√≠o.</div>
      </div>

      <div class="stack">
        <div class="label">Ciudad</div>
        <select class="field" id="oCiudad">
          <option value="Guadalajara">Guadalajara</option>
          <option value="Zapopan">Zapopan</option>
          <option value="Tlaquepaque">Tlaquepaque</option>
          <option value="Tonal√°">Tonal√°</option>
          <option value="Otro">Otro</option>
        </select>
      </div>

      <div class="stack">
        <div class="label">Direcci√≥n (si es entrega)</div>
        <input class="field" id="oDireccion" placeholder="Calle, n√∫mero, colonia‚Ä¶" />
      </div>

      <div class="grid2">
        <div class="stack">
          <div class="label">Tu nombre</div>
          <input class="field" id="oNombre" placeholder="Nombre" />
        </div>
        <div class="stack">
          <div class="label">Tu WhatsApp</div>
          <input class="field" id="oWhats" placeholder="33..." />
        </div>
      </div>

      <div class="stack">
        <div class="label">Pago</div>
        <select class="field" id="oPago">
          <option value="Transferencia">Transferencia</option>
          <option value="Mercado Pago">Mercado Pago (hasta 12 meses)</option>
        </select>
      </div>

      <div class="drawer-actions">
        <button class="btn btn-ghost" id="btnSendOrderWA" type="button">Enviar pedido a WhatsApp</button>
        <button class="btn btn-primary" id="btnCheckoutMP" type="button">Pagar con Mercado Pago</button>
      </div>

      <div class="hint">
        Si tu ciudad no es GDL/Zapopan/Tlaquepaque, el transporte se cotiza.
      </div>
    </div>
  </aside>

  <div class="modal-backdrop" id="productModalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Detalle de producto">
      <div class="drawer-head" style="border-bottom:1px solid rgba(0,0,0,.08)">
        <h3 style="margin:0" id="pmTitle">Producto</h3>
        <button class="xbtn" id="btnCloseProductModal" type="button" aria-label="Cerrar">‚úï</button>
      </div>
      <div class="modal-grid">
        <div class="modal-media">
          <img id="pmImg" alt="Imagen del producto" />
        </div>
        <div class="modal-body">
          <div class="kicker" id="pmCat" style="margin-bottom:10px">Categor√≠a</div>
          <h3 id="pmName">Nombre</h3>
          <p id="pmDesc" style="font-weight:800;color:rgba(30,14,32,.70)"></p>

          <div class="meta">
            <div style="font-weight:900">Precio: <span id="pmPrice">$0</span></div>
            <div style="display:flex;gap:10px;align-items:center">
              <input class="qty" id="pmQty" type="number" min="1" value="1" aria-label="Cantidad" />
              <button class="btn btn-primary" id="pmAdd" type="button">Agregar</button>
            </div>
          </div>

          <div class="divider"></div>

          <div style="font-weight:900;margin-top:6px">Productos relacionados</div>
          <div class="rel-grid" id="pmRelated"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
  // ======= Config =======
  const WHATSAPP_NUMBER = "523322461009";
  // Pega aqu√≠ tu link/checkout (o endpoint) de Mercado Pago:
  const MERCADOPAGO_CHECKOUT_URL = "";
  // Pega aqu√≠ tu link para dejar rese√±a:
  const GOOGLE_REVIEW_URL = "";

  // ======= Helpers =======
  const $ = (q) => document.querySelector(q);
  const $$ = (q) => Array.from(document.querySelectorAll(q));
  const money = (n) => new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(Number(n||0));
  const safeOpen = (url) => window.open(url, "_blank", "noopener,noreferrer");

  function on(selOrEl, evt, fn, opts){
    const el = (typeof selOrEl === "string") ? $(selOrEl) : selOrEl;
    if(!el) return null;
    el.addEventListener(evt, fn, opts);
    return el;
  }
  function safeCall(name, fn){
    try{ fn(); }
    catch(e){
      console.error("[Floralte] Error en:", name, e);
    }
  }
  function openWhatsApp(msg){
    const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
    safeOpen(url);
  }
  function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }

  // ======= Data (puedes ampliar aqu√≠) =======
  const products = [
    { id:"Rose-&-Lila", category:"Ramos", name:"Requiem", price:2500, img:"images/ram1.jpg",
      desc:"Ramo en tonos lila/rosa, ideal para regalo. Empaque premium y list√≥n." },
    { id:"ramo-rosas", category:"Ramos", name:"Sweet Pink", price:1500, img:"images/ram2.jpg",
      desc:"Lindas Gerberas en tonos rosa con toques en blanco, un ramo dulce pero elegante." },
    { id:"ramo-mix", category:"Ramos", name:"Pilar of Autumn", price:1000, img:"images/ram3.jpg",
      desc:"Combinaci√≥n rosas intensos y toques p√∫rpura. S√∫per fotog√©nico." },
    { id:"corazon", category:"Arreglos", name:"Lovely Heart 200", price:9500, img:"images/arr1.jpg",
      desc:"Coraz√≥n con 200 rosas sobre base de madera, el regalo perfecto." },
    { id:"girarreglo", category:"Arreglos", name:"Sunshine", price:2600, img:"images/arr2.jpg",
      desc:"Arreglo circular con girasoles y rosas sobre una base de madera." },
{ id:"arr3", category:"Arreglos", name:"Purple Mayhem", price:4200, img:"images/arr3.jpg",
      desc:"El ramo en tonos p√∫rpura definitivo. Elegancia y sutileza." },
{ id:"arr4", category:"Arreglos", name:"Imperial 100", price:4500, img:"images/arr4.jpg",
      desc:"Arreglo con 100 rosas sobre una base de ceramica." },
{ id:"ram4", category:"Ramos", name:"Blossom Mist", price:850, img:"images/ram4.jpg",
      desc:"Ramo de una vista en tonos rosa, elegante y sutil." },
{ id:"arr5", category:"Arreglos", name:"Wild Mix", price:1900, img:"images/arr5.jpg",
      desc:"Hermoso arreglo con deslumbrantes tonos rosa sobre una base de madera, el regalo perfecto para toda ocasi√≥n." },
{ id:"arr6", category:"Arreglos", name:"Wild Mix Luxury", price:2850, img:"images/arr6.jpg",
      desc:"Hermoso arreglo con diferentes tonos y colores. Perfecto para toda ocasi√≥n." },
  ];

  // NOTA: si quieres TODAS tus flores exactas, aqu√≠ es donde se pegan tal cual (id, nombre, precio, colores, imagenesPorColor).
  // Este set es el ejemplo; si tu versi√≥n tiene m√°s, p√©galas aqu√≠ y listo.
  const flores = [
      { id: 'rosa',       nombre: 'Rosa',               precio: 50,  colores: ['Roja', 'Rosa', 'Blanca', 'Amarilla', 'Naranja', 'Lila'], imagen: 'images/rosroj.jpg',
        imagenesPorColor: {
          'Roja':     'images/rosroj.jpg',
          'Rosa':     'images/rosros.jpg',
          'Blanca':   'images/rosblan.jpg',
          'Amarilla': 'images/rosam.jpg',
          'Naranja':  'images/rosnar.gif',
          'Lila':     'images/roslil.png'
        }
      },
      { id: 'rosaPremium', nombre: 'Rosa Premium',         precio: 70,  colores: ['Acapella'], imagen: 'images/rosac.jpg'  },
      { id: 'girasol',    nombre: 'Girasol',            precio: 40,  colores: [], imagen: 'images/gir.jpg'  },
      { id: 'lili',       nombre: 'Lili',               precio: 70,  colores: [], imagen: 'images/lil.jpg'  },
      { id: 'gerbera',    nombre: 'Gerbera',            precio: 50,  colores: ['Rosa', 'Roja', 'Naranja', 'Amarilla', 'Blanca'], imagen: 'images/gerros.jpg',
        imagenesPorColor: {
          'Roja':     'images/gerroj.jpg',
          'Rosa':     'images/gerros.jpg',
          'Blanca':   'images/gerblan.jpg',
          'Amarilla': 'images/gerama.jpg',
          'Naranja':  'images/gernar.jpg'
        }
      },
      { id: 'dendrobium', nombre: 'Orqu√≠dea Dendrobium',precio: 80,  colores: ['Blanco', 'Morado'], imagen: 'images/deblan.jpg',
        imagenesPorColor: {
          'Blanco': 'images/deblan.jpg',
          'Morado': 'images/demor.jpg'
        }
      },
      { id: 'cymbidium',  nombre: 'Orqu√≠dea Cymbidium', precio: 700, colores: ['Amarillo', 'Blanco'], imagen: 'images/cymama.jpg',
        imagenesPorColor: {
          'Blanco': 'images/cymblan.jpg',
          'Amarillo': 'images/cymama.jpg'
        }
      },
      { id: 'margarita',  nombre: 'Margaritas',         precio: 15,  colores: ['Blanco', 'Amarillo', 'Rojo', 'Lila', 'Naranja', 'Verde'], imagen: 'images/marblan.jpg',
        imagenesPorColor: {
          'Blanco': 'images/marblan.jpg',
          'Amarillo': 'images/marama.jpg',
          'Lila': 'images/marlila.jpg',
          'Naranja': 'images/marnar.jpg'
        }
      },
      { id: 'astromelia', nombre: 'Astromelia',         precio: 15,  colores: ['Morado', 'Blanco', 'Rosa'], imagen: 'images/asmor.jpg',
        imagenesPorColor: {
          'Morado': 'images/asmor.jpg',
          'Blanco': 'images/asblan.jpg',
          'Rosa': 'images/asros.jpg'
        }
      },
      { id: 'clavel',     nombre: 'Clavel',             precio: 20,  colores: ['Rojo', 'Rosa', 'Blanco'], imagen: 'images/claroj.jpg',
        imagenesPorColor: {
          'Rojo': 'images/claroj.jpg',
          'Rosa': 'images/claros.jpg',
          'Blanco': 'images/clablan.jpg'
        }
      },
      { id: 'babyrose',   nombre: 'Baby Rose',          precio: 50,  colores: ['Rosa', 'Blanco', 'Rojo', 'Amarillo', 'Lila'], imagen: 'images/babros.jpg',
        imagenesPorColor: {
          'Rosa': 'images/babros.jpg',
          'Blanco': 'images/bablan.jpg',
          'Rojo': 'images/babroj.jpg',
          'Amarillo': 'images/babama.jpg',
          'Lila': 'images/bablila.jpg'
        }
      },
      { id: 'craspedias', nombre: 'Craspedia',         precio: 80,   colores: [], imagen: 'images/crasp.jpg' },
      { id: 'eryngium', nombre: 'Eryngium',         precio: 40,     colores: [], imagen: 'images/eryn.gif' },
      { id: 'hypericum', nombre: 'Hypericum',         precio: 40,  colores: [], imagen: 'images/hype.gif' },
      { id: 'ornithogalum', nombre: 'Ornithogalum',         precio: 100,  colores: [], imagen: 'images/orni.png' },
      { id: 'snapdragon', nombre: 'Snapdragon',         precio: 30,  colores: ['Rosa', 'Blanco', 'Lila'], imagen: 'images/snaros.gif',
        imagenesPorColor: {
          'Rosa': 'images/snaros.gif',
          'Blanco': 'images/snablan.gif',
          'Lila': 'images/snalila.gif'
        }
      },
      { id: 'hortensia', nombre: 'Hortensia',         precio: 250,  colores: ['Azul', 'Tinto', 'Morado', 'Lila', 'Rosa'], imagen: 'images/horazul.jpg',
        imagenesPorColor: {
          'Azul': 'images/horazul.jpg',
          'Tinto': 'images/hortin.jpg',
          'Lila': 'images/horlila.jpg',
          'Rosa': 'images/horros.jpg'
        }
      },
      { id: 'lisianthus', nombre: 'Lisianthus',         precio: 90,  colores: ['Bicolor', 'Rosa', 'Morado', 'Blanco'], imagen: 'images/libi.png',
        imagenesPorColor: {
          'Bicolor': 'images/libi.png',
          'Rosa': 'images/liros.png',
          'Morado': 'images/limor.png',
          'Blanco': 'images/liblan.png'
        }
      },
      { id: 'protea', nombre: 'Protea',         precio: 900,  colores: ['Rosa', 'Blanca'], imagen: 'images/proros.gif',
        imagenesPorColor: {
          'Rosa': 'images/proros.gif',
          'Blanco': 'images/problan.jpg'
        }
      },
    ];

  const eventServices = [
    { id:"peceritas-vela", name:"Peceritas con vela", note:"centro de mesa en pecera con vela" },
    { id:"florero-grande-vela", name:"Florero grande con vela", note:"florero alto con vela decorativa" },
    { id:"kit-ramo-novia", name:"Kit ramo de novia", note:"ramo de novia (y posibles extras seg√∫n paquete)" },
    { id:"centros-redonda", name:"Centros de mesa redonda", note:"centros para mesas redondas" },
    { id:"centros-rect", name:"Centros de mesa rectangular", note:"centros para mesas rectangulares" },
    { id:"floreros-mesa-aleatorio", name:"Floreros para mesa (flor aleatoria)", note:"florero sencillo con flor de temporada" },
    { id:"estructura-back-novios", name:"Estructuras para back de novios", note:"estructura base para decoraci√≥n del back" },
    { id:"mesa-novios", name:"Arreglo para mesa de novios", note:"arreglo frontal o central para mesa principal" },
    { id:"decor-fuente", name:"Decoraci√≥n de fuente", note:"si hay fuente en el lugar" },
    { id:"decor-aerea", name:"Decoraci√≥n a√©rea", note:"instalaci√≥n a√©rea (seg√∫n viabilidad del lugar)" },
    { id:"decor-entrada", name:"Decoraci√≥n de entrada", note:"arco / bienvenida / pasillo" },
    { id:"transporte", name:"Transporte", note:"se cobra el transporte (seg√∫n ubicaci√≥n)" },
  ];

  const demoReviews = [
    { name:"Cliente", stars:5, text:"Dise√±o precioso y s√∫per puntual. El ramo lleg√≥ impecable." },
    { name:"Cliente", stars:5, text:"Atenci√≥n r√°pida por WhatsApp y el arreglo qued√≥ mejor que la foto." },
    { name:"Cliente", stars:4, text:"Muy buena calidad de flor. El env√≠o dentro de la zona fue gratis." },
  ];

  // ======= Global state =======
  let activeCategory = "Todos";
  const cart = new Map();
  let ramo = [];

  // ======= Boot =======
  document.addEventListener("DOMContentLoaded", () => {
    // Year
    const y = $("#year"); if(y) y.textContent = new Date().getFullYear();

    // Splash: siempre se cierra (sin romper nada)
    safeCall("splash", () => {
      const splash = $("#splash");
      const hideSplash = () => {
        const s = $("#splash");
        if(!s) return;
        s.classList.add("hide");
        window.setTimeout(() => { if(s && s.parentNode) s.parentNode.removeChild(s); }, 700);
      };
      // click to enter
      on(splash, "click", hideSplash);
      // auto hide
      window.setTimeout(hideSplash, 900);
      // failsafe
      window.setTimeout(hideSplash, 3500);
      // also on full load
      window.addEventListener("load", () => window.setTimeout(hideSplash, 600), {once:true});
    });

    // Petals
    safeCall("petals", () => {
      const petals = $("#petals");
      if(!petals) return;
      const count = 16;
      for(let i=0;i<count;i++){
        const s = document.createElement("span");
        s.className = "petal";
        const left = Math.random()*100;
        const delay = Math.random()*6;
        const dur = 9 + Math.random()*10;
        const size = 12 + Math.random()*12;
        const hue = 330 + Math.random()*45;
        const alpha = 0.10 + Math.random()*0.22;
        s.style.left = left+"vw";
        s.style.animationDelay = delay+"s";
        s.style.animationDuration = dur+"s";
        s.style.width = size+"px";
        s.style.height = (size*1.55)+"px";
        s.style.background = `hsla(${hue}, 72%, 62%, ${alpha})`;
        petals.appendChild(s);
      }
    });

    // Menu toggle
    safeCall("menu", () => {
      const menuToggle = $("#menuToggle");
      const nav = document.querySelector("header nav");
      if(menuToggle && nav){
        on(menuToggle, "click", () => nav.classList.toggle("open"));
        $$(".navlink").forEach(a => on(a, "click", () => nav.classList.remove("open")));
      }
    });

    // Hero buttons
    on("#btnToProducts","click", () => $("#productos")?.scrollIntoView({behavior:"smooth"}));
    on("#btnQuote","click", () => $("#eventos")?.scrollIntoView({behavior:"smooth"}));
    on("#btnToRamo","click", () => $("#arma-tu-ramo")?.scrollIntoView({behavior:"smooth"}));
    on("#btnOpenCart2","click", openCart);
    on("#btnOpenCart3","click", openCart);

    on("#btn-whats-quick","click", () => openWhatsApp("Hola Floralte, quiero hacer un pedido."));
    on("#btnContactWA","click", () => openWhatsApp("Hola Floralte, quiero informaci√≥n y cotizaci√≥n."));

    // Inits (no se detienen aunque algo falle)
    safeCall("reviews", renderDemoReviews);
    safeCall("productos", initProducts);
    safeCall("carrito", initCart);
    safeCall("armaTuRamo", initBouquetBuilder);
    safeCall("eventos", initEvents);
    safeCall("reveal", initReveal);

    on("#btnLeaveReview","click", () => {
      if(GOOGLE_REVIEW_URL && GOOGLE_REVIEW_URL.trim()) safeOpen(GOOGLE_REVIEW_URL.trim());
      else alert("Pega tu link en GOOGLE_REVIEW_URL dentro del c√≥digo.");
    });
  });

  // ======= Reveal on scroll =======
  function initReveal(){
    const els = $$(".reveal");
    if(!("IntersectionObserver" in window) || els.length===0){
      els.forEach(el => el.classList.add("on"));
      return;
    }
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if(e.isIntersecting){ e.target.classList.add("on"); io.unobserve(e.target); }
      });
    }, {threshold: .08});
    els.forEach(el => io.observe(el));
  }

  // ======= Products =======
  function categories(){
    const set = new Set(products.map(p => p.category));
    return ["Todos", ...Array.from(set)];
  }

  function initProducts(){
    renderCategoryChips();
    renderProducts();
    on("#searchInput","input", renderProducts);
    on("#sortSelect","change", renderProducts);
  }

  function renderCategoryChips(){
    const wrap = $("#categoryChips");
    if(!wrap) return;
    wrap.innerHTML = "";
    categories().forEach(cat => {
      const b = document.createElement("button");
      b.type = "button";
      b.className = "chip" + (cat===activeCategory ? " active" : "");
      b.textContent = cat;
      on(b, "click", () => {
        activeCategory = cat;
        $$(".chip").forEach(x => x.classList.remove("active"));
        b.classList.add("active");
        renderProducts();
      });
      wrap.appendChild(b);
    });
  }

  function renderProducts(){
    const grid = $("#productsGrid");
    if(!grid) return;

    const q = ($("#searchInput")?.value || "").trim().toLowerCase();
    const sort = $("#sortSelect")?.value || "featured";

    let list = products.slice();
    if(activeCategory !== "Todos") list = list.filter(p => p.category === activeCategory);
    if(q){
      list = list.filter(p =>
        (p.name||"").toLowerCase().includes(q) ||
        (p.category||"").toLowerCase().includes(q) ||
        (p.desc||"").toLowerCase().includes(q)
      );
    }

    if(sort === "price_asc") list.sort((a,b) => (a.price||0) - (b.price||0));
    else if(sort === "price_desc") list.sort((a,b) => (b.price||0) - (a.price||0));
    else if(sort === "name_asc") list.sort((a,b) => (a.name||"").localeCompare(b.name||"", "es"));

    grid.innerHTML = "";
    if(list.length === 0){
      grid.innerHTML = `<div class="card" style="grid-column:1/-1"><strong>No encontramos productos.</strong><div class="hint">Prueba con otra categor√≠a o b√∫squeda.</div></div>`;
      return;
    }

    list.forEach(p => {
      const card = document.createElement("div");
      card.className = "product";
      card.setAttribute("role","button");
      card.setAttribute("tabindex","0");
      card.innerHTML = `
        <div class="product-media">
          <span class="tag">${escapeHtml(p.category)}</span>
          <img src="${escapeAttr(p.img)}" alt="${escapeAttr(p.name)}" loading="lazy">
        </div>
        <div class="product-body">
          <div class="product-name">${escapeHtml(p.name)}</div>
          <div class="product-meta">
            <span>${escapeHtml(p.category)}</span>
            <span class="price">${p.price && p.price>0 ? money(p.price) : "Se cotiza"}</span>
          </div>
          <div class="product-actions">
            <input class="qty" type="number" min="1" value="1" aria-label="Cantidad">
            <button class="btn btn-primary" type="button" style="padding:10px 12px">Agregar</button>
          </div>
        </div>
      `;

      const img = card.querySelector("img");
      if(img) on(img, "error", () => {
        img.style.display="none";
        const media = img.closest(".product-media");
        if(media) media.style.background = "rgba(255,79,164,.10)";
      });

      const qty = card.querySelector(".qty");
      const add = card.querySelector(".btn-primary");
      on(add, "click", (e) => {
        e.stopPropagation();
        addToCart(p.id, clamp(parseInt(qty?.value,10)||1, 1, 999));
        pulseCart();
      });

      on(card, "click", () => openProductModal(p.id));
      on(card, "keydown", (e) => {
        if(e.key==="Enter" || e.key===" "){
          e.preventDefault();
          openProductModal(p.id);
        }
      });

      grid.appendChild(card);
    });
  }

  function escapeHtml(s){ return String(s||"").replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));}
  function escapeAttr(s){ return escapeHtml(s).replace(/"/g, "&quot;");}

  // ======= Product modal =======
  on("#btnCloseProductModal", "click", closeProductModal);

  function openProductModal(productId){
    const p = products.find(x => x.id === productId);
    if(!p) return;

    const back = $("#productModalBackdrop");
    if(!back) return;

    $("#pmTitle") && ($("#pmTitle").textContent = p.name);
    $("#pmCat") && ($("#pmCat").textContent = p.category);
    $("#pmName") && ($("#pmName").textContent = p.name);
    $("#pmDesc") && ($("#pmDesc").textContent = p.desc || "Descripci√≥n pr√≥ximamente.");
    $("#pmPrice") && ($("#pmPrice").textContent = (p.price && p.price>0) ? money(p.price) : "Se cotiza");
    $("#pmQty") && ($("#pmQty").value = "1");

    const img = $("#pmImg");
    if(img){
      img.style.display = "";
      img.src = p.img || "";
      img.onerror = () => {
        img.style.display="none";
        if(img.parentElement) img.parentElement.style.background = "rgba(255,79,164,.10)";
      };
    }

    const relWrap = $("#pmRelated");
    if(relWrap){
      const related = products.filter(x => x.category===p.category && x.id!==p.id).slice(0,4);
      relWrap.innerHTML = related.length ? "" : `<div class="hint" style="grid-column:1/-1">No hay relacionados por ahora.</div>`;
      related.forEach(r => {
        const el = document.createElement("div");
        el.className = "rel";
        el.innerHTML = `
          <img src="${escapeAttr(r.img)}" alt="${escapeAttr(r.name)}" loading="lazy">
          <div class="relb">
            <strong>${escapeHtml(r.name)}</strong>
            <small>${r.price && r.price>0 ? money(r.price) : "Se cotiza"}</small>
          </div>
        `;
        const ri = el.querySelector("img");
        if(ri) on(ri,"error", () => { ri.style.display="none"; el.style.background="rgba(255,79,164,.10)"; });
        on(el,"click", () => openProductModal(r.id));
        relWrap.appendChild(el);
      });
    }

    const addBtn = $("#pmAdd");
    if(addBtn){
      addBtn.onclick = () => {
        const q = clamp(parseInt($("#pmQty")?.value,10)||1, 1, 999);
        addToCart(p.id, q);
        pulseCart();
        closeProductModal();
        openCart();
      };
    }

    back.classList.add("show");
    on(back, "click", (e) => { if(e.target === back) closeProductModal(); }, {once:true});
    on(document, "keydown", (e) => { if(e.key==="Escape") closeProductModal(); }, {once:true});
  }

  function closeProductModal(){
    $("#productModalBackdrop")?.classList.remove("show");
  }

  // ======= Cart =======
  function initCart(){
    on("#btnOpenCart","click", openCart);
    on("#btnCloseCart","click", closeCart);
    on("#cartBackdrop","click", closeCart);

    on("#btnCheckoutMP","click", () => {
      if(cart.size === 0){ alert("Tu carrito est√° vac√≠o."); return; }
      if(MERCADOPAGO_CHECKOUT_URL && MERCADOPAGO_CHECKOUT_URL.trim()) safeOpen(MERCADOPAGO_CHECKOUT_URL.trim());
      else alert("Pega tu link/endpoint de Mercado Pago en MERCADOPAGO_CHECKOUT_URL.");
    });

    on("#btnSendOrderWA","click", () => {
      if(cart.size === 0){ alert("Agrega productos al carrito primero."); return; }
      openWhatsApp(buildCartMessage());
    });

    on("#oCiudad","change", syncShipHint);
    on("#oEntrega","change", syncShipHint);

    syncShipHint();
    updateCartBadge();
    renderCartItems();
  }

  function openCart(){
    $("#cartBackdrop")?.classList.add("show");
    $("#cartDrawer")?.classList.add("show");
    document.body.style.overflow = "hidden";
    syncShipHint();
  }
  function closeCart(){
    $("#cartBackdrop")?.classList.remove("show");
    $("#cartDrawer")?.classList.remove("show");
    document.body.style.overflow = "";
  }
  function pulseCart(){
    const b = $("#btnOpenCart");
    if(!b) return;
    b.style.transform = "scale(1.03)";
    setTimeout(()=> b.style.transform="", 140);
  }

  function addToCart(productId, qty){
    const p = products.find(x => x.id === productId);
    if(!p) return;
    const current = cart.get(productId);
    cart.set(productId, {product:p, qty: (current?current.qty:0) + qty});
    updateCartBadge();
    renderCartItems();
  }
  function setQty(productId, qty){
    const row = cart.get(productId);
    if(!row) return;
    cart.set(productId, {product:row.product, qty: clamp(qty,1,999)});
    updateCartBadge();
    renderCartItems();
  }
  function removeFromCart(productId){
    cart.delete(productId);
    updateCartBadge();
    renderCartItems();
  }
  function cartSubtotal(){
    let sum = 0;
    cart.forEach(({product, qty}) => {
      if(product.price && product.price>0) sum += product.price * qty;
    });
    return sum;
  }
  function updateCartBadge(){
    const count = Array.from(cart.values()).reduce((a, x) => a + x.qty, 0);
    const c = $("#cartCount"); if(c) c.textContent = String(count);
  }
  function renderCartItems(){
    const empty = $("#cartEmpty");
    const items = $("#cartItems");
    const total = $("#cartTotal");
    if(!empty || !items || !total) return;

    if(cart.size === 0){
      empty.style.display = "block";
      items.style.display = "none";
      items.innerHTML = "";
      total.textContent = money(0);
      return;
    }
    empty.style.display = "none";
    items.style.display = "flex";
    items.innerHTML = "";

    cart.forEach(({product, qty}) => {
      const row = document.createElement("div");
      row.className = "cart-item";
      row.innerHTML = `
        <div>
          <strong>${escapeHtml(product.name)}</strong><br>
          <small>${escapeHtml(product.category)} ¬∑ ${product.price && product.price>0 ? money(product.price) : "Se cotiza"}</small>
        </div>
        <div class="cart-item-actions">
          <input class="mini" type="number" min="1" value="${qty}" aria-label="Cantidad">
          <button class="link-danger" type="button">Quitar</button>
        </div>
      `;
      const mini = row.querySelector(".mini");
      const del = row.querySelector(".link-danger");
      on(mini, "change", (e) => setQty(product.id, parseInt(e.target.value,10)||1));
      on(del, "click", () => removeFromCart(product.id));
      items.appendChild(row);
    });

    total.textContent = money(cartSubtotal());
    syncShipHint();
  }

  function shippingIsFree(city){
    const c = (city || "").toLowerCase();
    return c.includes("guadalajara") || c.includes("zapopan") || c.includes("tlaquepaque");
  }
  function syncShipHint(){
    const city = $("#oCiudad")?.value || "Guadalajara";
    const delivery = $("#oEntrega")?.value || "Entrega a domicilio";
    const hint = $("#shipHint");
    if(!hint) return;

    if(delivery === "Recoger en tienda"){
      hint.textContent = "Recoger en tienda: sin env√≠o.";
      return;
    }
    hint.textContent = shippingIsFree(city) ? `Entrega en ${city}: env√≠o gratis.` : `Entrega en ${city}: se cotiza transporte.`;
  }

  function buildCartMessage(){
    const name = ($("#oNombre")?.value || "").trim();
    const phone = ($("#oWhats")?.value || "").trim();
    const delivery = $("#oEntrega")?.value || "Entrega a domicilio";
    const city = $("#oCiudad")?.value || "Guadalajara";
    const addr = ($("#oDireccion")?.value || "").trim();
    const pay = $("#oPago")?.value || "Transferencia";

    let msg = "Hola Floralte, quiero hacer este pedido:\n\n";
    cart.forEach(({product, qty}) => {
      msg += `- ${product.name} x${qty} (${product.price && product.price>0 ? money(product.price) : "se cotiza"})\n`;
    });
    msg += `\nTotal aprox (solo items con precio): ${money(cartSubtotal())}`;

    msg += `\nEntrega: ${delivery}`;
    if(delivery === "Entrega a domicilio"){
      msg += `\nCiudad: ${city}${shippingIsFree(city) ? " (env√≠o gratis)" : " (se cotiza transporte)"}`;
      if(addr) msg += `\nDirecci√≥n: ${addr}`;
    }else{
      msg += `\nRecoger en tienda (Ni√±os H√©roes 74, Rancho Blanco, Tlaquepaque)`;
    }
    msg += `\nPago: ${pay}`;
    if(name) msg += `\nNombre: ${name}`;
    if(phone) msg += `\nWhatsApp: ${phone}`;

    msg += "\n\n¬øMe confirmas disponibilidad y total final?";
    return msg;
  }

  // ======= Bouquet builder =======
  function initBouquetBuilder(){
    renderFlowers();
    renderRamoSummary();

    on("#btn-clear-ramo","click", () => { ramo = []; renderRamoSummary(); });

    on("#btn-whatsapp-ramo","click", () => {
      if(ramo.length === 0){ alert("Primero agrega flores a tu ramo."); return; }
      openWhatsApp(buildRamoMessage());
    });

    on("#btn-preview","click", async () => {
      if(ramo.length === 0){ alert("Agrega flores para generar preview."); return; }
      try{
        const res = await fetch("/api/ramo-preview", {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify({ ramo })
        });
        if(!res.ok) throw new Error("No se pudo generar preview.");
        const data = await res.json();
        if(!data || !data.url) throw new Error("Respuesta inv√°lida.");
        const img = $("#previewImg");
        if(img) img.src = data.url;
        const box = $("#previewBox");
        if(box) box.style.display = "block";
      }catch(err){
        alert("Preview IA no disponible (requiere backend /api/ramo-preview).");
      }
    });
  }

  function renderFlowers(){
    const wrap = $("#builder-flowers");
    if(!wrap) return;
    wrap.innerHTML = "";

    flores.forEach(f => {
      const card = document.createElement("div");
      card.className = "flor-card";

      const firstColor = (f.colores && f.colores.length) ? f.colores[0] : "";
      const imgSrc = (f.imagenesPorColor && firstColor && f.imagenesPorColor[firstColor]) ? f.imagenesPorColor[firstColor] : (f.imagen || "");

      card.innerHTML = `
        <div class="flor-header">
          <div class="flor-image"><img src="${escapeAttr(imgSrc)}" alt="${escapeAttr(f.nombre)}" loading="lazy"></div>
          <div style="display:flex;flex-direction:column;gap:2px">
            <div class="flor-name">${escapeHtml(f.nombre)}</div>
            <div class="flor-precio">${money(f.precio)} / tallo</div>
          </div>
        </div>

        <div class="flor-controls">
          <label>Color</label>
          <select class="flor-select" aria-label="Color">
            ${(f.colores||[]).map(c => `<option value="${escapeAttr(c)}">${escapeHtml(c)}</option>`).join("")}
          </select>

          <label style="margin-left:6px">Cantidad</label>
          <input class="flor-qty" type="number" min="1" value="1" aria-label="Cantidad">
          <button class="addbtn" type="button">Agregar</button>
        </div>
      `;

      const img = card.querySelector("img");
      const colorSel = card.querySelector(".flor-select");
      const qtyInput = card.querySelector(".flor-qty");
      const addBtn = card.querySelector(".addbtn");

      if(img) on(img, "error", () => {
        img.style.display="none";
        const box = img.closest(".flor-image");
        if(box) box.style.background="rgba(255,79,164,.12)";
      });

      on(colorSel, "change", () => {
        const c = colorSel.value;
        if(f.imagenesPorColor && f.imagenesPorColor[c] && img){
          img.style.display = "";
          img.src = f.imagenesPorColor[c];
        }
      });

      on(addBtn, "click", () => {
        const qty = clamp(parseInt(qtyInput?.value,10)||1, 1, 999);
        const color = (colorSel?.value || firstColor || "").trim();
        addFlorToRamo(f, color, qty);
      });

      wrap.appendChild(card);
    });
  }

  function addFlorToRamo(flor, color, qty){
    const idx = ramo.findIndex(x => x.id === flor.id && x.color === color);
    if(idx >= 0) ramo[idx].qty += qty;
    else ramo.push({ id: flor.id, nombre: flor.nombre, color, qty, precioUnit: flor.precio });
    renderRamoSummary();
  }

  function ramoTotal(){
    return ramo.reduce((sum, x) => sum + (x.precioUnit * x.qty), 0);
  }

  function renderRamoSummary(){
    const list = $("#summary-list");
    const total = $("#summary-total");
    if(!list || !total) return;

    list.innerHTML = "";
    if(ramo.length === 0){
      list.innerHTML = `<div class="hint">Tu ramo a√∫n est√° vac√≠o. Agrega flores de la lista.</div>`;
      total.textContent = money(0);
      return;
    }

    ramo.forEach((x, i) => {
      const row = document.createElement("div");
      row.className = "sumrow";
      row.innerHTML = `
        <div>
          <div style="font-weight:900">${escapeHtml(x.nombre)} <span style="font-weight:800;color:rgba(30,14,32,.62)">(${escapeHtml(x.color||"")})</span></div>
          <div class="hint">${x.qty} √ó ${money(x.precioUnit)}</div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px">
          <div style="font-weight:900">${money(x.precioUnit * x.qty)}</div>
          <button class="link-danger" type="button">Quitar</button>
        </div>
      `;
      on(row.querySelector(".link-danger"), "click", () => {
        ramo.splice(i,1);
        renderRamoSummary();
      });
      list.appendChild(row);
    });

    total.textContent = money(ramoTotal());
  }

  function buildRamoMessage(){
    let msg = "Hola Floralte, quiero este ramo:\n\n";
    ramo.forEach(x => { msg += `- ${x.nombre} (${x.color}) x${x.qty}\n`; });
    msg += `\nTotal aprox: ${money(ramoTotal())}`;
    msg += "\n\n¬øMe confirmas disponibilidad y cotizaci√≥n final?";
    return msg;
  }

  // ======= Eventos =======
  function initEvents(){
    renderServices();
    on("#btnSendEventWA","click", () => openWhatsApp(buildEventMessage()));
    on("#btnSendGardenWA","click", () => openWhatsApp(buildGardenMessage()));
  }

  function renderServices(){
    const wrap = $("#servicesList");
    if(!wrap) return;
    wrap.innerHTML = "";
    eventServices.forEach(s => {
      const row = document.createElement("label");
      row.className = "chk";
      row.innerHTML = `
        <input type="checkbox" value="${escapeAttr(s.name)}">
        <div>
          <strong>${escapeHtml(s.name)}</strong>
          <small>${escapeHtml(s.note || "")}</small>
        </div>
      `;
      wrap.appendChild(row);
    });
  }

  function buildEventMessage(){
    const tipo = $("#eTipo")?.value || "Evento";
    const fecha = $("#eFecha")?.value || "";
    const mesas = $("#eMesas")?.value || "0";
    const personas = $("#ePersonas")?.value || "0";
    const lugar = ($("#eLugar")?.value || "").trim();
    const notas = ($("#eNotas")?.value || "").trim();
    const selected = $$("#servicesList input[type=checkbox]:checked").map(i => i.value);

    let msg = `Hola Floralte, quiero cotizar un evento.\n\n`;
    msg += `Tipo: ${tipo}\n`;
    if(fecha) msg += `Fecha: ${fecha}\n`;
    msg += `Mesas: ${mesas}\n`;
    msg += `Personas: ${personas}\n`;
    if(lugar) msg += `Lugar: ${lugar}\n`;

    msg += `\nServicios:\n`;
    if(selected.length) selected.forEach(x => msg += `- ${x}\n`);
    else msg += "- (a definir)\n";

    if(notas) msg += `\nNotas: ${notas}\n`;
    msg += `\nNota: el transporte se cobra seg√∫n ubicaci√≥n. ¬øMe ayudas con la cotizaci√≥n?`;
    return msg;
  }

  function buildGardenMessage(){
    const tipo = $("#jTipo")?.value || "Decoraci√≥n de jardiner√≠a";
    const lugar = ($("#jLugar")?.value || "").trim();
    const notas = ($("#jNotas")?.value || "").trim();

    let msg = `Hola Floralte, quiero cotizar jardiner√≠a.\n\n`;
    msg += `Servicio: ${tipo}\n`;
    if(lugar) msg += `Ubicaci√≥n: ${lugar}\n`;
    if(notas) msg += `Detalles: ${notas}\n`;
    msg += "\n¬øMe confirmas disponibilidad y presupuesto aproximado?";
    return msg;
  }

  // ======= Reviews demo =======
  function renderDemoReviews(){
    const wrap = $("#demoReviews");
    if(!wrap) return;
    wrap.innerHTML = "";
    demoReviews.forEach(r => {
      const el = document.createElement("div");
      el.className = "review";
      el.innerHTML = `
        <strong>${escapeHtml(r.name)}</strong>
        <div class="stars">${"‚òÖ".repeat(r.stars)}${"‚òÜ".repeat(5-r.stars)}</div>
        <p>${escapeHtml(r.text)}</p>
      `;
      wrap.appendChild(el);
    });
  }
</script>

</body>
</html>
